## 메세지

> 객체(메시지 전송자, 수신자)들이 현력하기 위해 사용할 수 있는 의사소통 수단

- 구성
  - Operation name
  - argument

### 메시지와 메서드

- 메서드: 실제 수행되는 함수 또는 프로시저
- 메시지: 객체에 전달되는 의사

> 위의 둘을 구분함으로서 실행 시점에 실제로 실행되는 코드는 메시지를 수신하는 객체의 타입에 따라 달라짐

- 따라서 메시지 전송자와 수신자의 결합을 느슨하게 해줌
  - 메서드를 스스로 결정할 수 있는 자율권을 가지기 때문
- 확장 가능한 코드를 작성할 수 있게 함

___

## 인터페이스

- 퍼블릭 인터페이스: 의사소통을 위해 외부에 공개하는 메시지의 집합
  - 오퍼레이션: 퍼블릭 인터페이스에 포함된 메시지(시그니처를 가리키는 경우가 대부분)
  - 메서드: 실제로 실행되는 코드
- 시그니처: 오퍼레이션의 이름 + 파라미터 목록 

> 좋은 인터페이스는 **최소한의 인터페이스** 와 **추상적인 인터페이스**라는 조건을 만족해야 한다.

- 최소한의: 책임주도 설계로 협력과 무관한 오퍼레이션 배제
- 원칙
  - 디미터 법칙
  - 묻지 말고 시켜라
  - 의도를 드러낸 인터페이스
  - 명령-쿼리 분치

### 디미터의 법칙

> 객체의 내부 구조에 강하게 결합되지 않도록 협력 경로를 제한

- 하나의 도트만 사용하라
  - a().b().c() = 안좋은 코드
  - 하지만 정확히는 디미터는 결합도와 관련된 것이며 객체의 내부 구조가 외부로 노출되는 경우로 한정됨
- 클래스가 특정한 조건에 만족하는 대상에게만 메시지를 전송해야 함
  - 특정한 조건
    - 모든 클래스 C와 C에 구현된 모든 메서드 M에 대해서
    - M이 메시지를 전송할수 있는 객체
      - A의 인자로 전달된 클래스
      - C의 인스턴스 변수의
    - 쉽게 말하자면
      - this 객체
      - 메서드의 매개변수
      - this의 속성
      - this의 속성인 컬렉션의 요소
      - 메서드 내에서 생성된 지역객체

> 결과적으로 불필요한 어떤 것도 다른 객체에게 보여주지 않으며 다른 객체의 구현에 의존하지 않는 코드

- 디미터의 법칙을 어긴 코드
  - screening.getMovie().getDiscountConditions()
  - 이러한 코드는 인터페이스와 구현의 분리 원칙을 위반
- 개선한 코드
  - screening.calculate(audienceCount)

### 묻지말고 시켜라

> 메시지 전송자는 메시지 수신자의 상태를 기반으로 메시지 수신자의 상태를 바꿔서는 안된다.

- set 메서드 등으로 상태를 바꾸지 마라
- 메시지를 먼저 선택하면 필요한 정보를 묻지말고 원하는 것을 표한한 메시지를 전송

> 밀접하게 연관된 정보와 행동을 함께가지는 객체를 만들 수 있음

### 의도를 드러내는 인터페이스

> 동일한 작업을 수행하는 메서드에 대해 동일한 인터페이스를 제공해야 한다.

- 즉 메서드의 이름을 통해 명확하게 표현하라는 뜻(통일감)

### 명령-쿼리 분리 원칙

> 퍼블릭 인터페이스에 오퍼레이션을 정의하는 지침

- 절차를 묶어 호출 가능하도록 이름을 부여한 기능 루틴
  - 프로시저: 내부 상태를 변경하는 루틴
  - 함수: 필요한 값을 계산해서 반환하는 루틴
- 원칙
  - 객체의 상태를 변경하는 명령은 반환값을 가질 수 없다.
  - 객체의 정보를 반환하는 쿼리는 상태를 변경할 수 없다.
  - 이 원칙을 어기면 예상치 못한 버그가 생길 수 있다.
- 이 원칙을 통해 참조 투명성의 장점을 가질 수 있음
  - 표현식 e가 있을 때 e의 값으로 e가 나타나는 모든 위치를 교체하더라도 결과가 달라지지않는 특성
  - 불변성이라고도 함